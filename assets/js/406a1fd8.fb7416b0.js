"use strict";(globalThis.webpackChunkkingtech_actions=globalThis.webpackChunkkingtech_actions||[]).push([[933],{3496(e,n,i){i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>r});const s=JSON.parse('{"id":"deploy-pages/Example","title":"Example","description":"Basic Deployment","source":"@site/docs/deploy-pages/2_Example.md","sourceDirName":"deploy-pages","slug":"/deploy-pages/Example","permalink":"/deploy-pages/Example","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Overview","permalink":"/deploy-pages/Overview"},"next":{"title":"Overview","permalink":"/docusaurus-build/Overview"}}');var t=i(4848),o=i(8453);const l={sidebar_position:2},a="Example",c={},r=[{value:"Basic Deployment",id:"basic-deployment",level:2},{value:"Deploy Docusaurus Site",id:"deploy-docusaurus-site",level:2},{value:"With Custom Domain",id:"with-custom-domain",level:2},{value:"With Custom Commit Message",id:"with-custom-commit-message",level:2},{value:"Deploy to Custom Branch",id:"deploy-to-custom-branch",level:2},{value:"Multi-Environment Deployment",id:"multi-environment-deployment",level:2},{value:"Complete Documentation Pipeline",id:"complete-documentation-pipeline",level:2},{value:"Deploy Static HTML Site",id:"deploy-static-html-site",level:2},{value:"Deploy with Personal Access Token",id:"deploy-with-personal-access-token",level:2},{value:"Configuring GitHub Pages",id:"configuring-github-pages",level:2},{value:"Important Notes",id:"important-notes",level:2},{value:"What Happens",id:"what-happens",level:2}];function u(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"example",children:"Example"})}),"\n",(0,t.jsx)(n.h2,{id:"basic-deployment",children:"Basic Deployment"}),"\n",(0,t.jsx)(n.p,{children:"Simple deployment of a static site to GitHub Pages:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"name: Deploy to GitHub Pages\n\non:\n  push:\n    branches: [ main ]\n\njobs:\n  deploy:\n    runs-on: ubuntu-latest\n    steps:\n    - uses: actions/checkout@v4\n\n    # Build your static site (example)\n    - name: Build site\n      run: |\n        mkdir -p build\n        echo \"<html><body><h1>Hello GitHub Pages</h1></body></html>\" > build/index.html\n\n    # Deploy to GitHub Pages\n    - name: Deploy\n      uses: KingTech/KingTech.GithubActions/deploy-pages@main\n      with:\n        sourceDir: 'build'\n"})}),"\n",(0,t.jsx)(n.h2,{id:"deploy-docusaurus-site",children:"Deploy Docusaurus Site"}),"\n",(0,t.jsx)(n.p,{children:"Complete example building and deploying a Docusaurus documentation site:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"name: Deploy Documentation\n\non:\n  push:\n    branches: [ main ]\n\njobs:\n  deploy:\n    runs-on: ubuntu-latest\n    steps:\n    - uses: actions/checkout@v4\n\n    # Build Docusaurus site\n    - name: Build documentation\n      uses: KingTech/KingTech.GithubActions/docusaurus-build@main\n      with:\n        siteName: 'my-docs'\n        targetDir: './build'\n\n    # Deploy to GitHub Pages\n    - name: Deploy to GitHub Pages\n      uses: KingTech/KingTech.GithubActions/deploy-pages@main\n      with:\n        sourceDir: './build'\n"})}),"\n",(0,t.jsx)(n.h2,{id:"with-custom-domain",children:"With Custom Domain"}),"\n",(0,t.jsx)(n.p,{children:"Deploy to GitHub Pages with a custom domain:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"name: Deploy with Custom Domain\n\non:\n  push:\n    branches: [ main ]\n\njobs:\n  deploy:\n    runs-on: ubuntu-latest\n    steps:\n    - uses: actions/checkout@v4\n\n    # Build your site\n    - name: Build site\n      run: npm run build\n\n    # Deploy with custom domain\n    - name: Deploy to GitHub Pages\n      uses: KingTech/KingTech.GithubActions/deploy-pages@main\n      with:\n        sourceDir: './dist'\n        url: 'docs.mycompany.com'\n"})}),"\n",(0,t.jsx)(n.p,{children:"This automatically creates a CNAME file with your custom domain."}),"\n",(0,t.jsx)(n.h2,{id:"with-custom-commit-message",children:"With Custom Commit Message"}),"\n",(0,t.jsx)(n.p,{children:"Use a descriptive commit message for deployments:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"name: Deploy with Custom Message\n\non:\n  push:\n    branches: [ main ]\n\njobs:\n  deploy:\n    runs-on: ubuntu-latest\n    steps:\n    - uses: actions/checkout@v4\n      with:\n        fetch-depth: 0\n\n    # Get version for commit message\n    - name: Get version\n      id: version\n      uses: KingTech/KingTech.GithubActions/gitversion@main\n\n    # Build site\n    - name: Build\n      run: npm run build\n\n    # Deploy with version in commit message\n    - name: Deploy\n      uses: KingTech/KingTech.GithubActions/deploy-pages@main\n      with:\n        sourceDir: './dist'\n        commitMessage: 'Deploy version ${{ steps.version.outputs.version }}'\n"})}),"\n",(0,t.jsx)(n.h2,{id:"deploy-to-custom-branch",children:"Deploy to Custom Branch"}),"\n",(0,t.jsxs)(n.p,{children:["Deploy to a different branch (not ",(0,t.jsx)(n.code,{children:"gh-pages"}),"):"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"name: Deploy to Custom Branch\n\non:\n  push:\n    branches: [ main ]\n\njobs:\n  deploy:\n    runs-on: ubuntu-latest\n    steps:\n    - uses: actions/checkout@v4\n\n    - name: Build site\n      run: npm run build\n\n    # Deploy to 'production' branch\n    - name: Deploy\n      uses: KingTech/KingTech.GithubActions/deploy-pages@main\n      with:\n        sourceDir: './dist'\n        targetBranch: 'production'\n"})}),"\n",(0,t.jsx)(n.p,{children:"Remember to configure GitHub Pages to serve from this branch in repository settings."}),"\n",(0,t.jsx)(n.h2,{id:"multi-environment-deployment",children:"Multi-Environment Deployment"}),"\n",(0,t.jsx)(n.p,{children:"Deploy to different environments based on branch:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"name: Multi-Environment Deploy\n\non:\n  push:\n    branches: [ main, staging ]\n\njobs:\n  deploy:\n    runs-on: ubuntu-latest\n    steps:\n    - uses: actions/checkout@v4\n\n    - name: Build site\n      run: npm run build\n\n    # Deploy to production (main branch)\n    - name: Deploy to Production\n      if: github.ref == 'refs/heads/main'\n      uses: KingTech/KingTech.GithubActions/deploy-pages@main\n      with:\n        sourceDir: './dist'\n        targetBranch: 'gh-pages'\n        commitMessage: 'Deploy to production'\n\n    # Deploy to staging (staging branch)\n    - name: Deploy to Staging\n      if: github.ref == 'refs/heads/staging'\n      uses: KingTech/KingTech.GithubActions/deploy-pages@main\n      with:\n        sourceDir: './dist'\n        targetBranch: 'gh-pages-staging'\n        commitMessage: 'Deploy to staging'\n"})}),"\n",(0,t.jsx)(n.h2,{id:"complete-documentation-pipeline",children:"Complete Documentation Pipeline"}),"\n",(0,t.jsx)(n.p,{children:"Full workflow: build docs with Docusaurus, version, and deploy with custom domain:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"name: Documentation Pipeline\n\non:\n  push:\n    branches: [ main ]\n\njobs:\n  build-deploy:\n    runs-on: ubuntu-latest\n    steps:\n    - uses: actions/checkout@v4\n      with:\n        fetch-depth: 0\n\n    # Get version number\n    - name: Get version\n      id: version\n      uses: KingTech/KingTech.GithubActions/gitversion@main\n\n    # Build Docusaurus with version\n    - name: Build documentation\n      uses: KingTech/KingTech.GithubActions/docusaurus-build@main\n      with:\n        siteName: 'my-docs'\n        projectName: 'My Project'\n        url: 'https://docs.mycompany.com'\n        targetDir: './build'\n\n    # Deploy to GitHub Pages with custom domain\n    - name: Deploy to GitHub Pages\n      uses: KingTech/KingTech.GithubActions/deploy-pages@main\n      with:\n        sourceDir: './build'\n        url: 'docs.mycompany.com'\n        commitMessage: 'Deploy documentation v${{ steps.version.outputs.version }}'\n"})}),"\n",(0,t.jsx)(n.h2,{id:"deploy-static-html-site",children:"Deploy Static HTML Site"}),"\n",(0,t.jsx)(n.p,{children:"Deploy a simple HTML site without a build step:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"name: Deploy Static Site\n\non:\n  push:\n    branches: [ main ]\n\njobs:\n  deploy:\n    runs-on: ubuntu-latest\n    steps:\n    - uses: actions/checkout@v4\n\n    # Deploy the 'public' folder directly\n    - name: Deploy\n      uses: KingTech/KingTech.GithubActions/deploy-pages@main\n      with:\n        sourceDir: './public'\n"})}),"\n",(0,t.jsx)(n.h2,{id:"deploy-with-personal-access-token",children:"Deploy with Personal Access Token"}),"\n",(0,t.jsx)(n.p,{children:"Use a custom token instead of the default GITHUB_TOKEN:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"name: Deploy with PAT\n\non:\n  push:\n    branches: [ main ]\n\njobs:\n  deploy:\n    runs-on: ubuntu-latest\n    steps:\n    - uses: actions/checkout@v4\n\n    - name: Build site\n      run: npm run build\n\n    # Deploy with personal access token\n    - name: Deploy\n      uses: KingTech/KingTech.GithubActions/deploy-pages@main\n      with:\n        sourceDir: './dist'\n        token: ${{ secrets.PAGES_DEPLOY_TOKEN }}\n"})}),"\n",(0,t.jsx)(n.p,{children:"Useful when you need additional permissions or want to trigger workflows on the target branch."}),"\n",(0,t.jsx)(n.h2,{id:"configuring-github-pages",children:"Configuring GitHub Pages"}),"\n",(0,t.jsx)(n.p,{children:"After your first deployment, configure GitHub Pages in your repository:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.strong,{children:"Go to Settings \u2192 Pages"})}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Source:"}),' Select "Deploy from a branch"']}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Branch:"})," Choose the target branch (default: ",(0,t.jsx)(n.code,{children:"gh-pages"}),") and folder (",(0,t.jsx)(n.code,{children:"/ (root)"}),")"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Custom domain"})," (optional): If using the ",(0,t.jsx)(n.code,{children:"url"})," parameter, verify it appears here"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Enforce HTTPS:"})," Enable this for secure connections"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Your site will be available at:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Default: ",(0,t.jsx)(n.code,{children:"https://<username>.github.io/<repository>"})]}),"\n",(0,t.jsxs)(n.li,{children:["Custom domain: ",(0,t.jsx)(n.code,{children:"https://<your-custom-domain>"})]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"important-notes",children:"Important Notes"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Initial Setup:"})," The first deployment creates the target branch if it doesn't exist"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Force Push:"})," Deployments use force push, so the target branch only contains the latest deployment"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"CNAME File:"})," When using custom domains, a CNAME file is automatically created"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Token Permissions:"})," The default ",(0,t.jsx)(n.code,{children:"GITHUB_TOKEN"})," has sufficient permissions for most cases"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"No Checkout Needed:"})," The action doesn't require checking out the target branch, only the source"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Clean Deployments:"})," Each deployment replaces the entire target branch content"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"what-happens",children:"What Happens"}),"\n",(0,t.jsx)(n.p,{children:"When this action runs, it will:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Copy all files from the source directory to a temporary location"}),"\n",(0,t.jsx)(n.li,{children:"Create a CNAME file if a custom URL is specified"}),"\n",(0,t.jsx)(n.li,{children:"Initialize a new Git repository in the temporary location"}),"\n",(0,t.jsx)(n.li,{children:"Commit all files with the specified commit message"}),"\n",(0,t.jsx)(n.li,{children:"Force push to the target branch, replacing its entire contents"}),"\n",(0,t.jsx)(n.li,{children:"GitHub Pages automatically rebuilds and serves the updated site"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"The deployment typically takes 1-2 minutes to appear on the live site after pushing."})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(u,{...e})}):u(e)}},8453(e,n,i){i.d(n,{R:()=>l,x:()=>a});var s=i(6540);const t={},o=s.createContext(t);function l(e){const n=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);