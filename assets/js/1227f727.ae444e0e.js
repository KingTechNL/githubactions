"use strict";(globalThis.webpackChunkkingtech_actions=globalThis.webpackChunkkingtech_actions||[]).push([[407],{2274(e,n,i){i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>u});const s=JSON.parse('{"id":"gitversion/Example","title":"Example","description":"Basic Usage","source":"@site/docs/gitversion/2_Example.md","sourceDirName":"gitversion","slug":"/gitversion/Example","permalink":"/gitversion/Example","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Overview","permalink":"/gitversion/Overview"},"next":{"title":"Overview","permalink":"/publish-docker/Overview"}}');var t=i(4848),o=i(8453);const r={sidebar_position:2},a="Example",c={},u=[{value:"Basic Usage",id:"basic-usage",level:2},{value:"Using Version for Build",id:"using-version-for-build",level:2},{value:"Using Custom Configuration",id:"using-custom-configuration",level:2},{value:"Important Notes",id:"important-notes",level:2}];function l(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"example",children:"Example"})}),"\n",(0,t.jsx)(n.h2,{id:"basic-usage",children:"Basic Usage"}),"\n",(0,t.jsx)(n.p,{children:"Here's a simple example that generates a version number and displays it:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'name: Version Generation\n\non:\n  push:\n    branches: [ main, development ]\n  pull_request:\n    branches: [ main ]\n\njobs:\n  build:\n    runs-on: ubuntu-latest\n    steps:\n    # Checkout with full history (required for GitVersion)\n    - uses: actions/checkout@v3\n      with: \n        fetch-depth: 0\n\n    # Generate version number\n    - name: Get version\n      id: get_version\n      uses: KingTech/KingTech.GithubActions/gitversion@main\n\n    # Display the generated version\n    - name: Print version\n      run: |\n        echo "Generated version: ${{ steps.get_version.outputs.version }}"\n        echo "Branch: ${{ steps.get_version.outputs.branch }}"\n        echo "Branch tag: ${{ steps.get_version.outputs.branchTag }}"\n'})}),"\n",(0,t.jsx)(n.h2,{id:"using-version-for-build",children:"Using Version for Build"}),"\n",(0,t.jsx)(n.p,{children:"This example shows how to use the generated version number in a .NET build:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"name: Build with Version\n\non:\n  push:\n    branches: [ main ]\n\njobs:\n  build:\n    runs-on: ubuntu-latest\n    steps:\n    - uses: actions/checkout@v3\n      with: \n        fetch-depth: 0\n\n    # Generate version\n    - name: Get version\n      id: gitversion\n      uses: KingTech/KingTech.GithubActions/gitversion@main\n\n    # Build with version\n    - name: Setup .NET\n      uses: actions/setup-dotnet@v3\n      with:\n        dotnet-version: '8.0.x'\n\n    - name: Build\n      run: dotnet build --configuration Release -p:Version=${{ steps.gitversion.outputs.version }}\n\n    - name: Create NuGet package\n      run: dotnet pack --configuration Release -p:PackageVersion=${{ steps.gitversion.outputs.version }} --no-build\n"})}),"\n",(0,t.jsx)(n.h2,{id:"using-custom-configuration",children:"Using Custom Configuration"}),"\n",(0,t.jsx)(n.p,{children:"Example with a custom GitVersion configuration file:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"name: Version with Custom Config\n\non:\n  push:\n    branches: [ main ]\n\njobs:\n  build:\n    runs-on: ubuntu-latest\n    steps:\n    - uses: actions/checkout@v3\n      with: \n        fetch-depth: 0\n\n    # Use custom GitVersion config\n    - name: Get version\n      id: get_version\n      uses: KingTech/KingTech.GithubActions/gitversion@main\n      with:\n        useConfigFile: true\n        configFilePath: './config/GitVersion.yml'\n\n    - name: Display version\n      run: echo \"Version ${{ steps.get_version.outputs.version }}\"\n"})}),"\n",(0,t.jsx)(n.h2,{id:"important-notes",children:"Important Notes"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Always use ",(0,t.jsx)(n.code,{children:"fetch-depth: 0"})," when checking out your repository. GitVersion needs the full Git history to calculate versions correctly."]}),"\n",(0,t.jsxs)(n.li,{children:["The version is also available as an environment variable ",(0,t.jsx)(n.code,{children:"$VERSION"})," for use in subsequent steps."]}),"\n",(0,t.jsxs)(n.li,{children:["You can access all GitVersion outputs using ",(0,t.jsx)(n.code,{children:"${{ steps.<step-id>.outputs.<property> }}"})," (e.g., ",(0,t.jsx)(n.code,{children:"major"}),", ",(0,t.jsx)(n.code,{children:"minor"}),", ",(0,t.jsx)(n.code,{children:"patch"}),", ",(0,t.jsx)(n.code,{children:"nuGetVersion"}),", etc.)."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},8453(e,n,i){i.d(n,{R:()=>r,x:()=>a});var s=i(6540);const t={},o=s.createContext(t);function r(e){const n=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);